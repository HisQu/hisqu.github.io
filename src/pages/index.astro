---
import {getCollection, render} from 'astro:content';
import FormattedDate from '../components/FormattedDate.astro';
import Layout from '../layouts/IndexLayout.astro';
import Hero from "../components/Hero.astro";
import Partners from "../components/Partners.astro";
import Image from 'astro/components/Image.astro';

const posts = await getCollection('blog');
posts.sort((a, b) => +b.data.date - +a.data.date);
---

<Layout>
    <main>
        <Hero/>
        <Partners/>
        <ul transition:name="post">
            {
                posts.map((post) => (
                        <li class="post">
                            <div class="version_wrapper">
                                <div class="version_info">
                                    <a href={`/blog/${post.id}`}>
                                        <FormattedDate class="date" date={post.data.date}/>
                                    </a>
                                </div>
                            </div>

                            <div class="content">
                                <h2>
                                    <a href={`/blog/${post.id}`}>{post.data.title}</a>
                                </h2>
                                <p class="description">{post.data.description}</p>
                                <a href={`/blog/${post.id}`}>
                                    <Image
                                            src={post.data.image.src}
                                            alt={post.data.image.alt}
                                            class="post-image"
                                            loading="lazy"
                                    />
                                </a>
                            </div>
                        </li>
                ))
            }
        </ul>


    </main>
</Layout>
