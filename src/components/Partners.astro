---
import Image from "astro/components/Image.astro";
import {dfg, partners} from "../consts";

const isLocal = (src: string) => !/^https?:\/\//.test(src);
---
<section>
    <div class="py-24">
        <div class="px-6 lg:px-8">
            <div class="mx-auto grid max-w-lg grid-cols-4 items-center gap-x-8 gap-y-12 sm:max-w-xl sm:gap-x-10 sm:gap-y-14 lg:mx-0 lg:max-w-none bg-white p-10 rounded-2xl">
                {partners.map((p, i) => (
                        <a target="_blank" href={p.href}
                           class={`col-span-2 max-h-12 w-full lg:col-span-1 ${p.className ?? ""}`}
                           style="display: contents">
                            {
                                // Externe Quellen: <picture> + <img>

                                !isLocal(p.srcLight)
                                    ? (
                                                <picture>
                                                    {p.srcDark &&
                                                            <source srcset={p.srcDark} media="(prefers-color-scheme: dark)"/>}
                                                    <img
                                                            class="max-h-12 w-full object-contain"
                                                            src={p.srcLight}
                                                            alt={p.name}
                                                            width={p.width ?? 158}
                                                            height={p.height ?? 48}
                                                            loading="lazy"
                                                            decoding="async"
                                                    />
                                                </picture>
                                    )
                                    : (
                                        // Lokale Quellen: Image.astro (optimiert)

                                                <Image
                                                        class="max-h-12 w-full object-contain"
                                                        src={p.srcLight}
                                                        alt={p.name}
                                                        width={p.width ?? 158}
                                                        height={p.height ?? 48}
                                                        loading="lazy"
                                                        decoding="async"
                                                />
                                    )
                            }
                        </a>
                ))}
            </div>

            <div class="mt-16 flex justify-center">
                <p class="relative rounded-full bg-gray-50 px-4 py-1.5 text-sm/6 text-gray-600 inset-ring inset-ring-gray-900/5 dark:bg-gray-800/75 dark:text-gray-400 dark:inset-ring-white/10">
                    <span class="hidden md:inline">Find us at the DHd in Vienna!</span>
                    <a href="/blog/dhd_vienna"
                       class="font-semibold text-indigo-600 hover:text-indigo-500 dark:text-indigo-400 dark:hover:text-indigo-300">
                        <span class="absolute inset-0" aria-hidden="true"/>Get a sneak peak into our projects <span
                            aria-hidden="true">&rarr;</span>
                    </a>
                </p>
            </div>
        </div>

        <div class="py-10">
            <h4 class="pb-6">Fully funded by</h4>
            <div class="bg-white p-10 rounded-2xl max-w-md mx-auto">
                <a target="_blank" href={dfg.href}>
                    <Image
                            class="max-h-12 w-full object-contain"
                            src={dfg.srcLight}
                            alt={dfg.name}
                    />
                </a>
            </div>
        </div>
    </div>
</section>