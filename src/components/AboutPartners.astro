---
/* AboutPartners.astro — Astro + Tailwind (dark mode ready). */
import Image from "astro/components/Image.astro";
import { partners } from "../consts";

const isLocal = (src: string) => !/^https?:\/\//.test(src);
---

<div class="relative isolate overflow-hidden bg-white px-6 py-24 sm:py-32 lg:overflow-visible lg:px-0 dark:bg-gray-900">
    <div class="absolute inset-0 -z-10 overflow-hidden">
        <svg class="absolute top-0 left-[max(50%,25rem)] h-256 w-512 -translate-x-1/2 mask-[radial-gradient(64rem_64rem_at_top,white,transparent)] stroke-gray-200 dark:stroke-gray-800" aria-hidden="true">
            <defs>
                <pattern id="e813992c-7d03-4cc4-a2bd-151760b470a0" width="200" height="200" x="50%" y="-1" patternUnits="userSpaceOnUse">
                    <path d="M100 200V.5M.5 .5H200" fill="none" />
                </pattern>
            </defs>
            <svg x="50%" y="-1" class="overflow-visible fill-gray-50 dark:fill-gray-800/50">
                <path d="M-100.5 0h201v201h-201Z M699.5 0h201v201h-201Z M499.5 400h201v201h-201Z M-300.5 600h201v201h-201Z" stroke-width="0" />
            </svg>
            <rect width="100%" height="100%" stroke-width="0" fill="url(#e813992c-7d03-4cc4-a2bd-151760b470a0)" />
        </svg>
    </div>

    <div class="mx-auto grid max-w-2xl grid-cols-1 gap-x-8 gap-y-16 lg:mx-0 lg:max-w-none lg:grid-cols-2 lg:items-start lg:gap-y-10">
        <!-- Header -->
        <div class="lg:col-span-2 lg:col-start-1 lg:row-start-1 lg:mx-auto lg:grid lg:w-full lg:max-w-7xl lg:grid-cols-2 lg:gap-x-8 lg:px-8">
            <div class="lg:pr-4">
                <div class="lg:max-w-lg">
                    <p class="text-base/7 font-semibold text-purple-600 dark:text-purple-400">Partner im Verbund</p>
                    <h1 class="mt-2 text-4xl font-semibold tracking-tight text-pretty text-gray-900 sm:text-5xl dark:text-white">
                        Meet the Consortium
                    </h1>
                    <p class="mt-6 text-xl/8 text-gray-700 dark:text-gray-300">
                        HisQu wird von führenden Einrichtungen der Digital Humanities und Geschichtswissenschaft getragen.
                        Der Verbund verbindet methodische Exzellenz in <strong>Computerlinguistik</strong> und <strong>Wissensgraphen</strong>
                        mit langjähriger <strong>Editionserfahrung</strong> und <strong>Forschungsdaten-Kompetenz</strong>.
                    </p>
                </div>
            </div>
        </div>

        <!-- Visual -->
        <div class="-mt-12 -ml-12 p-12 lg:sticky lg:top-4 lg:col-start-2 lg:row-span-2 lg:row-start-1 lg:overflow-hidden">
            <img
                    class="w-3xl max-w-none rounded-xl bg-gray-900 shadow-xl ring-1 ring-gray-400/10 sm:w-228 dark:bg-gray-800 dark:ring-white/10"
                    src="https://tailwindcss.com/plus-assets/img/component-images/dark-project-app-screenshot.png"
                    alt="HisQu – Verbundpartner und Infrastruktur (Platzhaltervisual)"
            />
        </div>

        <!-- Body -->
        <div class="lg:col-span-2 lg:col-start-1 lg:row-start-2 lg:mx-auto lg:grid lg:w-full lg:max-w-7xl lg:grid-cols-2 lg:gap-x-8 lg:px-8">
            <div class="lg:pr-4">
                <div class="max-w-xl text-base/7 text-gray-600 lg:max-w-lg dark:text-gray-400">
                    <p>
                        Gemeinsam entwickeln wir eine <strong class="text-gray-900 dark:text-white">domänenagnostische Forschungsdateninfrastruktur</strong> für historische Quellen.
                    </p>

                    <ul role="list" class="mt-8 space-y-8 text-gray-600 dark:text-gray-400">
                        {partners.map((p) => (
                                <li class="flex items-start gap-x-4">
                                    <!-- Logo (ersetzt Icon) -->
                                    <a href={p.href} target="_blank" rel="noreferrer" class="mt-1 block shrink-0" aria-label={`${p.name} – Website`}>
                                        {
                                            !isLocal(p.srcLight) ? (
                                                    <picture>
                                                        {p.srcDark && <source srcset={p.srcDark} media="(prefers-color-scheme: dark)" />}
                                                        <Image
                                                                class="max-h-24 w-40 object-contain"
                                                                src={p.srcLight}
                                                                alt={p.name}
                                                                width={p.width ?? 158}
                                                                height={p.height ?? 48}
                                                                loading="lazy"
                                                                decoding="async"
                                                        />
                                                    </picture>
                                            ) : (
                                                    <Image
                                                            class="max-h-12 w-40 object-contain"
                                                            src={p.srcLight}
                                                            alt={p.name}
                                                            width={p.width ?? 158}
                                                            height={p.height ?? 48}
                                                            loading="lazy"
                                                            decoding="async"
                                                    />
                                            )
                                        }
                                    </a>

                                    <!-- Textblock -->
                                    <div class="flex-1">
                                        <a href={p.href} target="_blank" rel="noreferrer" class="group inline-flex items-baseline gap-2">
                                            <strong class="font-semibold text-gray-900 group-hover:underline dark:text-white">
                                                {p.name}{p.unit && ` · ${p.unit}`}
                                            </strong>
                                        </a>

                                        {p.institution && (
                                                <div class="text-sm">{p.institution}</div>
                                        )}

                                        {(p.leads && p.leads.length > 0) && (
                                                <div class="text-sm">
                                                    {p.leads.map(l => (l.title ? `${l.title} ${l.name}` : l.name)).join(" · ")}
                                                </div>
                                        )}

                                        {p.summary && (
                                                <div class="mt-1">
                                                    {p.summary}
                                                </div>
                                        )}
                                    </div>
                                </li>
                        ))}
                    </ul>

                    <h2 class="mt-16 text-2xl font-bold tracking-tight text-gray-900 dark:text-white">Kontakt &amp; Mitmachen</h2>
                    <p class="mt-6">
                        Fragen, Kooperationen oder Fallstudien? Besuche unsere
                        <a class="font-medium text-purple-600 underline decoration-purple-200 underline-offset-2 hover:text-purple-700 dark:text-purple-400 dark:decoration-purple-900" href="/contact">Kontaktseite</a>
                        oder eröffne ein
                        <a class="font-medium text-purple-600 underline decoration-purple-200 underline-offset-2 hover:text-purple-700 dark:text-purple-400 dark:decoration-purple-900" href="https://github.com/HisQu/Organisation/issues" target="_blank" rel="noreferrer">Issue</a>.
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>
