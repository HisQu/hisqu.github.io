---
import Image from 'astro/components/Image.astro';
import {analyse, archiv, erstellung, nachvollziehbarkeit, ontologie, verarbeitung} from "../assets";
export interface Step {
    title: string
    subtitle: string
    description: string
    image: { src: string; alt?: string }
    caption?: string
}

export interface Props {
    title?: string
    description?: string
    eyebrow?: string
    steps: Step[]
    gradientFrom?: string
    gradientTo?: string
    class?: string
}

const steps: Step[] = [
    {
        title: "Erstellung",
        subtitle: "Digitalisierung historischer Ressourcen",
        description: `HisQu zielt darauf ab, die Digitalisierung gedruckter historischer Quellen mit anspruchsvollen Layouts – etwa Frakturschriften oder komplexen Spaltenstrukturen – deutlich zu verbessern. Dafür erweitern wir klassische OCR-Tools wie Tesseract durch den Einsatz von LLMs: Diese übernehmen die Vorverarbeitung der Quellen mithilfe von Bounding Boxes und ermöglichen zugleich eine nachträgliche Korrektur der Ergebnisse.`,
        image: {
            src: erstellung,
            alt: "Visualisierung der Digitalisierung historischer Quellen",
        },
    },
    {
        title: "Modellierung",
        subtitle: "Zentrales Element: Die Ontologie",
        description: `Die konsequente Digitalisierung geschichtswissenschaftlicher Forschungsprozesse erfordert domänenspezifische Vokabulare. Nur so lassen sich Quellen und Forschungsaussagen semantisch erfassen und interoperabel machen. HisQu setzt hierfür auf Wissensgraphen, die sowohl die Ontologie als auch die damit formulierten inhaltlichen Aussagen gleichberechtigt abbilden. Grundlage dafür ist die Arbeit mit Protégé.`,
        image: {
            src: ontologie,
            alt: "Darstellung einer Ontologie-Modellierung",
        },
    },
    {
        title: "Verarbeitung",
        subtitle: "Einbindung von Large Language Models",
        description: `Für die Datenverarbeitung entwickelt HisQu innovative Tools auf Basis von LLMs. Mit Paredros steht Historiker:innen eine Grammatikentwicklungsumgebung zur Verfügung, die bei der Formulierung von Grammatiken zur Auswertung von Quellen unterstützt. Ergänzend entsteht mit OPA (Ontology Parser Assistant) ein Python-basierter LLM-Client, mit dem Ontologie-Snippets erstellt und flexibel erweitert werden – eine Grundlage für die semantische Modellierung und Weiterentwicklung domänenspezifischen Wissens.`,
        image: {
            src: verarbeitung,
            alt: "Workflow mit LLM-basierten Tools",
        },
    },
    {
        title: "Analyse",
        subtitle: "KI-unterstütztes SPARQL-Endpoint",
        description: `Um den Zugang zu komplexen SPARQL-Abfragen zu erleichtern, entwickelt HisQu einen grafischen Query-Builder. Dieser ermöglicht es, Abfragen intuitiv zusammenzustellen und zugleich den generierten SPARQL-Code einzusehen. Perspektivisch wird zudem eine Anbindung an ein LLM integriert, um die Erstellung und Anpassung von Abfragen noch benutzerfreundlicher zu gestalten.`,
        image: {
            src: analyse,
            alt: "Beispiel einer grafischen SPARQL-Abfrage",
        },
        caption: "Abfrage zu allen Klerikern mit Ortsbezug zur Diözese Mainz – oben grafische Oberfläche, unten generierter SPARQL-Code.",
    },
    {
        title: "Archivierung",
        subtitle: "Linked Open Data mit FactGrid/Wikibase",
        description: `Für die Speicherung der Daten nutzt HisQu FactGrid, eine speziell auf die Bedürfnisse der Geschichtswissenschaft zugeschnittene Wikibase-Instanz. Sie ermöglicht kollaboratives und nachvollziehbares Arbeiten mit Klarnamen. Alle aktiven Mitwirkenden erhalten personalisierte Konten, die eindeutig über ORCID-IDs verknüpft sind. Auf diese Weise entstehen zitierfähige (Mikro-)Publikationen, die die Sichtbarkeit und Akzeptanz von HisQu in der wissenschaftlichen Community stärken.`,
        image: {
            src: archiv,
            alt: "FactGrid-Oberfläche für kollaborative Archivierung",
        },
    },
    {
        title: "Nachvollziehbarkeit",
        subtitle: "Dokumentationsframework für den Forschungsprozess",
        description: `HisQu entwickelt ein interaktives Labortagebuch, das historische Forschungsprozesse transparent und reproduzierbar macht. Dafür werden abstrakte Dokumentationsbausteine wie Datenerhebung, -auswertung oder Visualisierung definiert und in einer graphischen Oberfläche zu konkreten Workflows zusammengesetzt. Ein visueller Editor bildet die einzelnen Schritte samt Abhängigkeiten ab und ermöglicht ihre Verwaltung mit zeitgemäßen Werkzeugen wie Git-Integration und automatisch generiertem Wiki.`,
        image: {
            src: nachvollziehbarkeit,
            alt: "Visueller Workflow-Editor für Dokumentation",
        },
    },
]

const {
    title = "Ein Forschungsprozess ohne Unterbrechungen nach den FAIR-Prinzipien",
    description = "In den digitalen Geisteswissenschaften dominieren bislang digitale Editionen und punktuelle „Insel-Lösungen“ – Tools und Skripte, die nur für ein spezifisches Forschungsproblem entwickelt wurden. Ein geschlossener digitaler Forschungsdatenzyklus fehlt, wodurch Nachvollziehbarkeit, Reproduzierbarkeit und nachhaltige Archivierung oft nicht gewährleistet sind. HisQu setzt hier an und entwickelt eine fachspezifische Lösung, die historische Quellen und Forschungsprozesse gezielt digital unterstützt und den Forschungsworkflow nahtlos zusammenführt.",
    eyebrow= "Ein lückenloser Prozess",

    rg_title = "",
    gradientFrom = "#ff80b5",
    gradientTo = "#9089fc",
    class: outerClass = "",
} = Astro.props as Props
---

<section class={`relative isolate ${outerClass}`} aria-label={title}>
    <!-- Hintergrund-Deko -->
    <div class="absolute top-0 right-0 left-1/2 -z-10 -ml-24 transform-gpu overflow-hidden blur-3xl lg:ml-24 xl:ml-48"
         aria-hidden="true">
        <div class="aspect-[801/1036] w-[50.0625rem]"
             style={`background-image: linear-gradient(to top right, ${gradientFrom}, ${gradientTo}); opacity:0.3; clip-path: polygon(63.1% 29.5%,100% 17.1%,76.6% 3%,48.4% 0%,44.6% 4.7%,54.5% 25.3%,59.8% 49%,55.2% 57.8%,44.4% 57.2%,27.8% 47.9%,35.1% 81.5%,0% 97.7%,39.2% 100%,35.2% 81.4%,97.2% 52.8%,63.1% 29.5%)`}></div>
    </div>

    <div class="px-6 pt-24 pb-16 sm:pt-40 lg:px-8 lg:pt-32">
        <div class="py-24 sm:py-32">
            <div class="px-6 lg:px-8">
                <div class="mx-auto max-w-3xl lg:mx-0">
                    {eyebrow && (<p class="text-base/7 font-semibold text-indigo-600 dark:text-indigo-400">{eyebrow}</p>)}
                    <h2 class="mt-2 text-5xl font-semibold tracking-tight text-gray-900 sm:text-7xl dark:text-white">{title}</h2>
                    <p class="mt-8 text-lg font-medium text-pretty text-gray-500 sm:text-xl/8 dark:text-gray-400">{description}</p>
                </div>
            </div>
        </div>

        <!-- RG Explanation -->
        <div class="bg-white py-24 dark:bg-gray-900">
            <div class="mx-auto max-w-7xl sm:px-6 lg:px-8">
                <div class="relative isolate overflow-hidden bg-gray-900 px-6 py-20 sm:rounded-3xl sm:px-10 sm:py-24 lg:py-24 xl:px-24 dark:bg-gray-800/50 dark:after:pointer-events-none dark:after:absolute dark:after:inset-0 dark:after:inset-ring dark:after:inset-ring-white/10 dark:after:sm:rounded-3xl">
                    <div class="mx-auto grid max-w-2xl grid-cols-1 gap-x-8 gap-y-16 sm:gap-y-20 lg:mx-0 lg:max-w-none lg:grid-cols-2 lg:items-center lg:gap-y-0">
                        <div class="lg:row-start-2 lg:max-w-md">
                            <h2 class="text-3xl font-semibold tracking-tight text-balance text-white sm:text-4xl">Boost your productivity. Start using our app today.</h2>
                            <p class="mt-6 text-lg/8 text-gray-300">Ac euismod vel sit maecenas id pellentesque eu sed consectetur. Malesuada adipiscing sagittis vel nulla. Ac euismod vel sit maecenas.</p>
                        </div>
                        <img width="2432" height="1442" src="https://tailwindcss.com/plus-assets/img/component-images/dark-project-app-screenshot.png" alt="Product screenshot" class="relative -z-20 max-w-xl min-w-full rounded-xl shadow-xl ring-1 ring-white/10 lg:row-span-4 lg:w-5xl lg:max-w-none" />
                        <div class="max-w-xl lg:row-start-3 lg:mt-10 lg:max-w-md lg:border-t lg:border-white/10 lg:pt-10 dark:lg:border-white/10">
                            <dl class="max-w-xl space-y-8 text-base/7 text-gray-300 lg:max-w-none">
                                <div class="relative">
                                    <dt class="ml-9 inline-block font-semibold text-white">
                                        <svg viewBox="0 0 20 20" fill="currentColor" data-slot="icon" aria-hidden="true" class="absolute top-1 left-1 size-5 text-indigo-500 dark:text-indigo-400">
                                            <path d="M5.5 17a4.5 4.5 0 0 1-1.44-8.765 4.5 4.5 0 0 1 8.302-3.046 3.5 3.5 0 0 1 4.504 4.272A4 4 0 0 1 15 17H5.5Zm3.75-2.75a.75.75 0 0 0 1.5 0V9.66l1.95 2.1a.75.75 0 1 0 1.1-1.02l-3.25-3.5a.75.75 0 0 0-1.1 0l-3.25 3.5a.75.75 0 1 0 1.1 1.02l1.95-2.1v4.59Z" clip-rule="evenodd" fill-rule="evenodd" />
                                        </svg>
                                        Push to deploy.
                                    </dt>
                                    <dd class="inline">Lorem ipsum, dolor sit amet consectetur adipisicing elit aute id magna.</dd>
                                </div>
                                <div class="relative">
                                    <dt class="ml-9 inline-block font-semibold text-white">
                                        <svg viewBox="0 0 20 20" fill="currentColor" data-slot="icon" aria-hidden="true" class="absolute top-1 left-1 size-5 text-indigo-500 dark:text-indigo-400">
                                            <path d="M10 1a4.5 4.5 0 0 0-4.5 4.5V9H5a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-6a2 2 0 0 0-2-2h-.5V5.5A4.5 4.5 0 0 0 10 1Zm3 8V5.5a3 3 0 1 0-6 0V9h6Z" clip-rule="evenodd" fill-rule="evenodd" />
                                        </svg>
                                        SSL certificates.
                                    </dt>
                                    <dd class="inline">Anim aute id magna aliqua ad ad non deserunt sunt. Qui irure qui lorem cupidatat commodo.</dd>
                                </div>
                                <div class="relative">
                                    <dt class="ml-9 inline-block font-semibold text-white">
                                        <svg viewBox="0 0 20 20" fill="currentColor" data-slot="icon" aria-hidden="true" class="absolute top-1 left-1 size-5 text-indigo-500 dark:text-indigo-400">
                                            <path d="M4.632 3.533A2 2 0 0 1 6.577 2h6.846a2 2 0 0 1 1.945 1.533l1.976 8.234A3.489 3.489 0 0 0 16 11.5H4c-.476 0-.93.095-1.344.267l1.976-8.234Z" />
                                            <path d="M4 13a2 2 0 1 0 0 4h12a2 2 0 1 0 0-4H4Zm11.24 2a.75.75 0 0 1 .75-.75H16a.75.75 0 0 1 .75.75v.01a.75.75 0 0 1-.75.75h-.01a.75.75 0 0 1-.75-.75V15Zm-2.25-.75a.75.75 0 0 0-.75.75v.01c0 .414.336.75.75.75H13a.75.75 0 0 0 .75-.75V15a.75.75 0 0 0-.75-.75h-.01Z" clip-rule="evenodd" fill-rule="evenodd" />
                                        </svg>
                                        Database backups.
                                    </dt>
                                    <dd class="inline">Ac tincidunt sapien vehicula erat auctor pellentesque rhoncus.</dd>
                                </div>
                            </dl>
                        </div>
                    </div>
                    <div aria-hidden="true" class="pointer-events-none absolute top-1/2 left-12 -z-10 -translate-y-1/2 transform-gpu blur-3xl lg:top-auto lg:-bottom-48 lg:translate-y-0">
                        <div style="clip-path: polygon(74.1% 44.1%, 100% 61.6%, 97.5% 26.9%, 85.5% 0.1%, 80.7% 2%, 72.5% 32.5%, 60.2% 62.4%, 52.4% 68.1%, 47.5% 58.3%, 45.2% 34.5%, 27.5% 76.7%, 0.1% 64.9%, 17.9% 100%, 27.6% 76.8%, 76.1% 97.7%, 74.1% 44.1%)" class="aspect-1155/678 w-288.75 bg-linear-to-tr from-[#ff80b5] to-[#9089fc] opacity-25 dark:opacity-20"></div>
                    </div>
                </div>
            </div>
        </div>



        <!-- Prozess-Schritte -->
        <div class="mt-20 space-y-32">
            {steps.map((step, i) => (
                    <div class={`mx-auto max-w-6xl lg:grid lg:grid-cols-12 lg:gap-x-8 lg:items-center ${i % 2 === 0 ? '' : 'lg:flex-row-reverse'}`}>
                        <div class="sm:mx-auto sm:max-w-2xl lg:col-span-6">
                            <h2 class="text-2xl font-semibold text-gray-900 dark:text-white">{i + 1}. {step.title}</h2>
                            <h4 class="mt-2 text-lg font-medium text-purple-600 dark:text-purple-400">{step.subtitle}</h4>
                            <p class="mt-4 text-base text-gray-600 dark:text-gray-300">{step.description}</p>
                            {step.caption && (
                                    <p class="mt-2 text-sm text-gray-500 dark:text-gray-400 italic">{step.caption}</p>
                            )}
                        </div>
                        <div class="mt-10 sm:mt-6 lg:mt-0 lg:col-span-6">
                            <Image src={step.image.src} alt={step.image.alt ?? ""}
                                   class="rounded-xl shadow-lg ring-1 ring-gray-900/10 dark:ring-white/10 bg-white p-2"
                                   loading="lazy"/>
                        </div>
                    </div>
            ))}
        </div>
    </div>
</section>
